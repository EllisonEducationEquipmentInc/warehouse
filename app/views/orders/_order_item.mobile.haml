%tr{:id => "order_item_#{order_item.product.id}", :class => "order_item_row"}
  - fields_for 'order[order_item_attributes][]', order_item do |order_item_fields|
    %td{:width => "10%"}
      = order_item_fields.hidden_field :product_id
      = order_item.product.item_num
    %td= order_item.product.name
    %td{:width => "3%"}= @editable ? order_item_fields.text_field(:quantity, :size => 2, :class => 'quantity', :onchange => "update_totals()") : order_item.quantity
    %td{:width => "5%", :align => 'right'}= @editable ? order_item_fields.text_field(:price, :size => 6, :class => 'price', :onchange => "update_totals()") : number_to_currency(order_item.price)
    %td{:width => "10%", :align => 'right', :class => "item_total"}= number_to_currency order_item.item_total
    - unless params[:action] == 'show'
      %td{:width => "10%", :align => 'right'}= link_to 'x', '#', :onclick => "this.up('.order_item_row').remove();update_totals();"